---
title: "서버에서 필수! 길드 시스템 구현"
date: "2025-04-25"
thumbnail: "https://i.ytimg.com/vi/ptWIJbiqj9w/hqdefault.jpg"
tags: ["고급", "베드락", "스크립트API", "소스코드", "서버", "설계자", "롱폼"]
url: "https://www.youtube.com/watch?v=ptWIJbiqj9w"
duration: "3:53"
series: "스크립트 API 튜토리얼"
episode: 6
difficulty: "고급"
---

# 서버에서 필수! 길드 시스템 구현

<div align="center">
<img src="https://i.ytimg.com/vi/ptWIJbiqj9w/hqdefault.jpg" alt="썸네일" width="600"/>
</div>

## 목차
- [소개](#소개)
- [주요 기능](#주요-기능)
- [사용 방법](#사용-방법)
- [기술적 설명](#기술적-설명)
- [자주 묻는 질문](#자주-묻는-질문)
- [추가 리소스](#추가-리소스)

## 소개
이 영상은 마인크래프트 베드락 에디션에서 스크립트 API를 활용하여 서버에 길드 시스템을 구현하는 방법을 설명합니다. 길드 시스템은 플레이어들이 팀을 이루어 활동할 수 있도록 도와주는 기능으로, 서버에 커뮤니티 요소를 추가할 수 있습니다. 플레이어 태그와 동적 속성을 활용한 데이터 관리 기법을 배울 수 있는 고급 스크립트 API 튜토리얼입니다.

## 주요 기능

### 길드 관리
- 길드 생성, 가입, 탈퇴, 정보 조회 기능
- 길드별 설명 추가 가능
- 플레이어 이름 옆에 길드 태그 표시
- 길드장이 길드 해체 가능

### 길드장 기능
- 길드원 관리 (승인, 거부, 추방)
- 길드 정보 수정
- 가입 요청 관리
- 길드 해체 권한

### 관리자 기능
- 관리자 태그를 가진 플레이어에게 특별 권한 부여
- 길드장의 허락 없이 길드 삭제 가능
- 서버 운영에 필요한 특별 권한 제공

### 길드 채팅
- 길드원들끼리 비밀 채팅 가능
- 간단한 접두사(ㅁ)로 길드 채팅 활성화
- 팀 내 의사소통 강화

## 사용 방법

### 기본 명령어
1. `!길드` - 길드 관련 메뉴 열기
   - 생성: 새 길드 만들기
   - 가입: 기존 길드에 가입 신청
   - 탈퇴: 현재 소속된 길드에서 나가기
   - 정보: 길드 정보 확인
   - 길드장 메뉴: 길드장 전용 관리 메뉴
   - 관리자: 서버 관리자용 메뉴

### 길드 생성 과정
1. `!길드` 입력
2. "생성" 버튼 클릭
3. 길드 이름 입력
4. 길드 설명 입력
5. "보내기" 버튼 클릭

### 길드 가입 과정
1. `!길드` 입력
2. "가입" 버튼 클릭
3. 가입할 길드 선택
4. "보내기" 버튼 클릭
5. 길드장의 승인 대기

### 길드장 관리
1. `!길드` 입력
2. "길드장 메뉴" 클릭
3. 원하는 관리 옵션 선택:
   - 길드원 관리: 길드원 추방 등
   - 길드 정보 수정: 이름, 설명 변경
   - 가입 요청 관리: 가입 요청 승인/거부
   - 길드 해체: 길드를 완전히 삭제

### 길드 채팅 사용법
- 채팅 앞에 `ㅁ` 접두사를 붙이면 해당 메시지는 같은 길드원들에게만 표시됨
- 예: `ㅁ안녕하세요 길드원 여러분!`

### 관리자 기능 사용법
1. `admin` 태그를 가진 플레이어만 사용 가능
2. `!길드` 입력
3. "관리자" 버튼 클릭
4. 관리할 길드 선택 후 필요한 작업 수행

## 기술적 설명

### 데이터 저장 방식
길드 시스템은 마인크래프트 베드락 에디션의 동적 속성(Dynamic Property)을 활용하여 데이터를 영구적으로 저장합니다. 이를 통해 월드가 재시작되거나 플레이어가 나갔다 들어와도 길드 정보가 유지됩니다.

```javascript
// 길드 정보 저장 예시
function saveGuilds(guilds) {
  world.setDynamicProperty("guilds", JSON.stringify(guilds));
}

// 길드 정보 불러오기 예시
function loadGuilds() {
  const guildsJson = world.getDynamicProperty("guilds");
  return guildsJson ? JSON.parse(guildsJson) : [];
}
```

### 플레이어 태그 시스템
각 플레이어가 속한 길드를 시각적으로 표시하기 위해 플레이어 태그 시스템을 활용합니다. 이를 통해 플레이어 이름 옆에 길드 정보가 표시됩니다.

```javascript
// 길드 태그 적용 예시
function applyGuildTag(player, guildName) {
  // 기존 길드 태그 제거
  player.getTags().forEach(tag => {
    if (tag.startsWith("guild:")) {
      player.removeTag(tag);
    }
  });
  
  // 새 길드 태그 추가
  player.addTag(`guild:${guildName}`);
}
```

### 이벤트 처리
채팅 메시지 감지 및 길드 채팅 기능은 이벤트 리스너를 통해 구현됩니다.

```javascript
// 채팅 이벤트 처리 예시
world.beforeEvents.chatSend.subscribe(event => {
  const message = event.message;
  const player = event.sender;
  
  // 길드 채팅 감지 (ㅁ 접두사)
  if (message.startsWith("ㅁ")) {
    event.cancel = true; // 원본 메시지 전송 취소
    
    // 플레이어의 길드 확인
    const guild = getPlayerGuild(player);
    if (!guild) {
      player.sendMessage("§c길드에 가입되어 있지 않습니다.");
      return;
    }
    
    // 길드원들에게만 메시지 전송
    sendMessageToGuildMembers(guild, player, message.substring(1));
  }
});
```

### UI 시스템
길드 관리 메뉴는 마인크래프트의 폼 UI를 사용하여 구현됩니다.

```javascript
// 길드 메인 메뉴 UI 예시
function showGuildMainMenu(player) {
  const menu = new ActionFormData()
    .setTitle("길드 시스템")
    .setBody("원하는 메뉴를 선택하세요.")
    .addButton("생성", "textures/ui/imagetatoo")
    .addButton("가입", "textures/ui/confirm")
    .addButton("탈퇴", "textures/ui/leave")
    .addButton("정보", "textures/ui/infobulb")
    .addButton("길드장 메뉴", "textures/ui/permissions_member_star");
  
  // 관리자인 경우 관리자 메뉴 추가
  if (player.hasTag("admin")) {
    menu.addButton("관리자", "textures/ui/op");
  }
  
  menu.addButton("닫기", "textures/ui/cancel");
  
  menu.show(player).then(response => {
    if (response.canceled) return;
    
    // 선택에 따른 처리
    // ...
  });
}
```

## 자주 묻는 질문

**Q: 길드에 몇 명까지 가입할 수 있나요?**  
A: 기본적으로 길드 인원 제한은 없지만, 코드를 수정하여 원하는 인원 제한을 설정할 수 있습니다. 서버 성능을 고려하여 적절한 인원을 설정하는 것이 좋습니다.

**Q: 길드장이 서버를 나가면 길드는 어떻게 되나요?**  
A: 기본 코드에서는 길드장이 서버를 나가도 길드는 유지됩니다. 길드장이 길드를 탈퇴하면 길드가 삭제되지만, 단순히 서버를 나갔다 들어오는 것은 길드에 영향을 주지 않습니다.

**Q: 관리자 권한은 어떻게 부여하나요?**  
A: `/tag <플레이어명> add admin` 명령어를 사용하여 플레이어에게 admin 태그를 부여하면 관리자 기능을 사용할 수 있습니다.

**Q: 길드 채팅이 다른 플레이어에게 보이지 않게 할 수 있나요?**  
A: 네, 영상에서 소개된 대로 채팅 메시지 앞에 'ㅁ' 접두사를 붙이면 해당 메시지는 같은 길드원들에게만 표시됩니다.

## 추가 리소스
- [스크립트 API 시작하기](https://youtu.be/zBVdaQ0AXOY)
- [마인크래프트 베드락 API 문서](https://learn.microsoft.com/ko-kr/minecraft/creator/scriptapi/minecraft/server/minecraft-server)
- [동적 속성 사용 가이드](https://learn.microsoft.com/ko-kr/minecraft/creator/documents/dynamicproperties)
- [UI 시스템 가이드](https://learn.microsoft.com/ko-kr/minecraft/creator/documents/uisystem)

## 이런 분들에게 추천합니다
- 마인크래프트 베드락 서버 운영자
- 커뮤니티 기능을 강화하고 싶은 월드 관리자
- 스크립트 API를 활용한 고급 서버 기능 개발에 관심 있는 개발자
- RPG 요소를 서버에 추가하고 싶은 맵 제작자

## 관련 튜토리얼
- [서버에 입장, 재입장하는 플레이어에게 맞춤 메시지 보내기](https://www.youtube.com/watch?v=RN9-LahL4tI)
- [스크립트 API의 첫걸음, 채팅명령어 만들기](https://www.youtube.com/watch?v=zBVdaQ0AXOY)
- [아이디 옆에 붙는 나만의 [칭호] 만들기!](https://www.youtube.com/watch?v=)
- [스코어보드 돈 벌기 시스템 구현하기!](https://www.youtube.com/watch?v=)

## 실습 코드
```javascript
// 길드 시스템 구현 코드 (기본 구조)
// 사용 방법: 스크립트 API가 활성화된 월드에 적용하세요
// 기본 명령어: !길드 (길드 메뉴 열기)
// 길드 채팅: 채팅 앞에 'ㅁ' 붙이기 (예: ㅁ안녕하세요)
// 관리자 명령어: admin 태그가 필요합니다 (/tag <플레이어명> add admin)

// 길드 시스템 초기화
function initialize() {
  // 길드 데이터가 없으면 초기화
  if (!world.getDynamicProperty("guilds")) {
    world.setDynamicProperty("guilds", "[]");
  }
  
  // 이벤트 리스너 등록
  world.beforeEvents.chatSend.subscribe(onChatSend);
}

// 채팅 이벤트 처리
function onChatSend(event) {
  const message = event.message;
  const player = event.sender;
  
  // 길드 명령어 처리
  if (message === "!길드") {
    event.cancel = true;
    showGuildMainMenu(player);
    return;
  }
  
  // 길드 채팅 처리
  if (message.startsWith("ㅁ")) {
    event.cancel = true;
    handleGuildChat(player, message.substring(1));
    return;
  }
}

// 길드 데이터 관리 함수
function getGuilds() {
  const guildsJson = world.getDynamicProperty("guilds");
  return JSON.parse(guildsJson || "[]");
}

function saveGuilds(guilds) {
  world.setDynamicProperty("guilds", JSON.stringify(guilds));
}

function getPlayerGuild(player) {
  const guilds = getGuilds();
  for (const guild of guilds) {
    if (guild.members.includes(player.id) || guild.owner === player.id) {
      return guild;
    }
  }
  return null;
}

// 길드 생성 함수
function createGuild(player, name, description) {
  const guilds = getGuilds();
  
  // 이미 길드에 가입되어 있는지 확인
  if (getPlayerGuild(player)) {
    player.sendMessage("§c이미 길드에 가입되어 있습니다.");
    return false;
  }
  
  // 같은 이름의 길드가 있는지 확인
  if (guilds.some(g => g.name === name)) {
    player.sendMessage("§c이미 존재하는 길드 이름입니다.");
    return false;
  }
  
  // 새 길드 생성
  const newGuild = {
    id: crypto.randomUUID(),
    name: name,
    description: description,
    owner: player.id,
    members: [],
    joinRequests: [],
    createdAt: Date.now()
  };
  
  guilds.push(newGuild);
  saveGuilds(guilds);
  
  // 플레이어에게 길드 태그 적용
  applyGuildTag(player, name);
  
  player.sendMessage(`§a길드 "${name}"을(를) 생성했습니다!`);
  return true;
}

// 길드 가입 요청 함수
function requestJoinGuild(player, guildId) {
  const guilds = getGuilds();
  const guild = guilds.find(g => g.id === guildId);
  
  if (!guild) {
    player.sendMessage("§c존재하지 않는 길드입니다.");
    return false;
  }
  
  // 이미 길드에 가입되어 있는지 확인
  if (getPlayerGuild(player)) {
    player.sendMessage("§c이미 길드에 가입되어 있습니다.");
    return false;
  }
  
  // 이미 요청을 보냈는지 확인
  if (guild.joinRequests.includes(player.id)) {
    player.sendMessage("§c이미 해당 길드에 가입 요청을 보냈습니다.");
    return false;
  }
  
  // 가입 요청 추가
  guild.joinRequests.push(player.id);
  saveGuilds(guilds);
  
  player.sendMessage(`§a"${guild.name}" 길드에 가입 요청을 보냈습니다.`);
  
  // 길드장에게 알림
  const owner = world.getPlayers().find(p => p.id === guild.owner);
  if (owner) {
    owner.sendMessage(`§e${player.name}님이 길드 가입을 요청했습니다. !길드 → 길드장 메뉴 → 가입 요청 관리에서 확인하세요.`);
  }
  
  return true;
}

// 길드 채팅 처리 함수
function handleGuildChat(player, message) {
  const guild = getPlayerGuild(player);
  
  if (!guild) {
    player.sendMessage("§c길드에 가입되어 있지 않습니다.");
    return;
  }
  
  // 길드원들에게 메시지 전송
  const guildMembers = world.getPlayers().filter(p => 
    p.id === guild.owner || guild.members.includes(p.id)
  );
  
  const formattedMessage = `§8[§b${guild.name}§8] §7${player.name}: §f${message}`;
  
  guildMembers.forEach(member => {
    member.sendMessage(formattedMessage);
  });
}

// 플레이어에게 길드 태그 적용
function applyGuildTag(player, guildName) {
  // 기존 길드 태그 제거
  player.getTags().forEach(tag => {
    if (tag.startsWith("guild:")) {
      player.removeTag(tag);
    }
  });
  
  // 새 길드 태그 추가
  player.addTag(`guild:${guildName}`);
}

// UI 메뉴 함수
function showGuildMainMenu(player) {
  const menu = new ActionFormData()
    .setTitle("길드 시스템")
    .setBody("원하는 메뉴를 선택하세요.")
    .addButton("생성", "textures/ui/imagetatoo")
    .addButton("가입", "textures/ui/confirm")
    .addButton("탈퇴", "textures/ui/leave")
    .addButton("정보", "textures/ui/infobulb");
  
  const playerGuild = getPlayerGuild(player);
  
  // 길드장인 경우에만 길드장 메뉴 표시
  if (playerGuild && playerGuild.owner === player.id) {
    menu.addButton("길드장 메뉴", "textures/ui/permissions_member_star");
  }
  
  // 관리자인 경우 관리자 메뉴 표시
  if (player.hasTag("admin")) {
    menu.addButton("관리자", "textures/ui/op");
  }
  
  menu.addButton("닫기", "textures/ui/cancel");
  
  menu.show(player).then(response => {
    if (response.canceled) return;
    
    switch (response.selection) {
      case 0: // 생성
        showCreateGuildMenu(player);
        break;
      case 1: // 가입
        showJoinGuildMenu(player);
        break;
      case 2: // 탈퇴
        leaveGuild(player);
        break;
      case 3: // 정보
        showGuildInfo(player);
        break;
      case 4: // 길드장 메뉴 또는 관리자 메뉴 또는 닫기
        if (playerGuild && playerGuild.owner === player.id) {
          showGuildOwnerMenu(player);
        } else if (player.hasTag("admin")) {
          showAdminMenu(player);
        }
        break;
      case 5: // 관리자 메뉴 또는 닫기
        if (player.hasTag("admin")) {
          showAdminMenu(player);
        }
        break;
    }
  });
}

// 스크립트 초기화
initialize();
```

## 태그
#마인크래프트 #베드락 #스크립트API #길드시스템 #서버관리 #커뮤니티기능 #팀시스템 #애드온제작 #스티브코딩