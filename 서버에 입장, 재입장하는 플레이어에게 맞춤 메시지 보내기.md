---
title: "서버에 입장, 재입장하는 플레이어에게 맞춤 메시지 보내기"
date: "2025-04-25"
thumbnail: "https://i.ytimg.com/vi/RN9-LahL4tI/hqdefault.jpg"
tags: ["고급", "베드락", "스크립트API", "서버", "소스코드", "설계자", "롱폼"]
url: "https://www.youtube.com/watch?v=RN9-LahL4tI"
duration: "2:09"
series: "스크립트 API 튜토리얼"
episode: 5
difficulty: "고급"
---

# 서버에 입장, 재입장하는 플레이어에게 맞춤 메시지 보내기

<div align="center">
<img src="https://i.ytimg.com/vi/RN9-LahL4tI/hqdefault.jpg" alt="썸네일" width="600"/>
</div>

## 목차
- [소개](#소개)
- [주요 기능](#주요-기능)
- [기술적 설명](#기술적-설명)
- [구현 방법](#구현-방법)
- [자주 묻는 질문](#자주-묻는-질문)
- [추가 리소스](#추가-리소스)

## 소개
이 영상은 마인크래프트 베드락 에디션에서 스크립트 API를 활용하여 서버에 입장하거나 재입장하는 플레이어를 구분하여 각각 다른 맞춤형 메시지를 보내는 기능을 구현하는 방법을 설명합니다. 플레이어의 첫 접속과 재접속을 구분하여 서로 다른 환영 메시지를 전송함으로써 서버 이용자 경험을 개선하는 방법을 다룹니다.

## 주요 기능

### 플레이어 접속 구분
- 첫 접속 플레이어와 재접속 플레이어 자동 구분
- 동적 속성을 활용한 접속 기록 저장
- 서버 재시작 후에도 플레이어 접속 기록 유지

### 맞춤형 메시지 전송
- 첫 접속 플레이어에게 환영 메시지 발송
- 재접속 플레이어에게 귀환 메시지 발송
- 전체 공지와 개인 메시지 분리 전송

### 관리자 기능
- 관리자 전용 명령어로 플레이어 접속 기록 초기화
- `!리셋플레이어` 명령어를 통한 간편한 관리
- 권한 시스템을 통한 명령어 액세스 제한

## 기술적 설명

### 이벤트 리스너 등록
스크립트 API의 이벤트 시스템을 활용하여 플레이어 스폰 이벤트를 감지합니다. 이 이벤트는 플레이어가 서버에 처음 입장하거나 재입장할 때 트리거됩니다. 이벤트 리스너 내에서 플레이어의 접속 이력을 확인하고 적절한 메시지를 전송하는 로직을 구현합니다.

```javascript
// 플레이어 스폰 이벤트 리스너 등록
world.afterEvents.playerSpawn.subscribe((event) => {
  // 리스폰은 무시 (죽고 살아나는 경우 제외)
  if (event.initialSpawn === false) return;
  
  // 플레이어 처리 로직
  // ...
});
```

### 동적 속성 활용
월드의 동적 속성(Dynamic Property)을 활용하여 플레이어 접속 기록을 저장합니다. 동적 속성은 서버가 재시작되더라도 데이터가 유지되기 때문에 안정적인 플레이어 기록 관리가 가능합니다.

```javascript
// 플레이어 목록 가져오기
const playersJson = world.getDynamicProperty("players") || "[]";
const players = JSON.parse(playersJson);

// 플레이어 목록 저장하기
world.setDynamicProperty("players", JSON.stringify(players));
```

### 관리자 명령어 처리
채팅 이벤트를 구독하여 특정 명령어를 감지하고, 관리자 권한을 확인한 후 플레이어 목록을 초기화하는 기능을 구현합니다.

```javascript
// 채팅 이벤트 리스너 등록
world.beforeEvents.chatSend.subscribe((event) => {
  if (event.message === "!리셋플레이어") {
    event.cancel = true; // 채팅 메시지 표시 방지
    resetPlayers(event.sender);
  }
});
```

## 구현 방법

### 1. 플레이어 스폰 이벤트 처리
1. 플레이어 스폰 이벤트 감지
2. 리스폰 이벤트는 무시 (죽고 살아나는 경우)
3. 현재 접속한 플레이어가 첫 접속인지 재접속인지 확인
4. 접속 유형에 따라 적절한 메시지 전송

### 2. 첫 접속 플레이어 처리
1. 플레이어 ID가 저장된 목록에 없는지 확인
2. 목록에 없다면 플레이어 ID 추가 및 저장
3. 전체 채팅으로 새 플레이어 입장 공지
4. 해당 플레이어에게 개인 환영 메시지 전송

### 3. 재접속 플레이어 처리
1. 플레이어 ID가 저장된 목록에 있는지 확인
2. 목록에 있다면 재접속으로 판단
3. 전체 채팅으로 재접속 공지
4. 해당 플레이어에게 개인 귀환 메시지 전송

### 4. 관리자 명령어 구현
1. 채팅 이벤트 감지
2. `!리셋플레이어` 명령어 확인
3. 명령어 실행자의 관리자 권한 확인
4. 권한이 있다면 플레이어 목록 초기화
5. 명령어 실행 결과 메시지 전송

## 자주 묻는 질문

**Q: 플레이어 목록이 초기화되는 경우는 언제인가요?**  
A: 관리자가 `!리셋플레이어` 명령어를 실행할 때만 초기화됩니다. 서버 재시작이나 월드 리로드 시에도 동적 속성에 저장된 데이터는 유지됩니다.

**Q: 맞춤 메시지의 내용을 수정하려면 어떻게 해야 하나요?**  
A: 스크립트 코드에서 메시지 부분을 찾아 원하는 내용으로 수정하면 됩니다. 첫 접속과 재접속에 대한 메시지를 각각 수정할 수 있습니다.

**Q: 관리자 권한은 어떻게 부여하나요?**  
A: 게임 내에서 `/tag <플레이어명> add admin` 명령어를 사용하여 플레이어에게 관리자 태그를 부여할 수 있습니다.

**Q: 동적 속성에 저장되는 데이터 용량에 제한이 있나요?**  
A: 네, 동적 속성에는 용량 제한이 있어 매우 큰 서버에서는 주의가 필요합니다. 일반적인 규모의 서버에서는 문제가 되지 않습니다.

## 추가 리소스
- [스크립트 API 시작하기](https://youtu.be/zBVdaQ0AXOY)
- [마인크래프트 베드락 공식 문서](https://learn.microsoft.com/ko-kr/minecraft/creator/scriptapi/)
- [동적 속성 관련 문서](https://learn.microsoft.com/ko-kr/minecraft/creator/documents/dynamicproperties)
- [이벤트 시스템 관련 문서](https://learn.microsoft.com/ko-kr/minecraft/creator/documents/eventsystem)

## 이런 분들에게 추천합니다
- 마인크래프트 베드락 서버 관리자
- 서버 사용자 경험을 향상시키고 싶은 월드 제작자
- 스크립트 API를 활용한 서버 기능 개발에 관심 있는 개발자
- 동적 속성과 이벤트 시스템을 학습하고 싶은 코더

## 관련 튜토리얼
- [스크립트 API의 첫걸음, 채팅명령어 만들기](https://www.youtube.com/watch?v=zBVdaQ0AXOY)
- [서버에서 필수! 길드 시스템 구현](https://www.youtube.com/watch?v=)
- [아이디 옆에 붙는 나만의 [칭호] 만들기!](https://www.youtube.com/watch?v=)
- [스코어보드xNPC를 활용한 투표 시스템 구현하기!](https://www.youtube.com/watch?v=)

## 실습 코드
```javascript
// 플레이어 환영 시스템
// 사용 방법: 스크립트 API가 활성화된 월드에 적용하세요
// 관리자 명령어: !리셋플레이어 (admin 태그가 필요)

// 플레이어 목록 초기화 함수
function resetPlayers(player) {
  // 관리자 권한 확인
  if (!player.hasTag("admin")) {
    player.sendMessage("§c관리자 권한이 필요합니다.");
    return;
  }
  
  // 플레이어 목록 초기화
  world.setDynamicProperty("players", "[]");
  player.sendMessage("§a플레이어 목록이 초기화되었습니다.");
}

// 채팅 명령어 처리
world.beforeEvents.chatSend.subscribe((event) => {
  if (event.message === "!리셋플레이어") {
    event.cancel = true; // 채팅 메시지 표시 방지
    resetPlayers(event.sender);
  }
});

// 플레이어 스폰 이벤트 리스너 등록
world.afterEvents.playerSpawn.subscribe((event) => {
  // 리스폰은 무시 (죽고 살아나는 경우 제외)
  if (event.initialSpawn === false) return;
  
  const player = event.player;
  
  // 월드에 저장된 플레이어 목록 가져오기
  const playersJson = world.getDynamicProperty("players") || "[]";
  const players = JSON.parse(playersJson);
  
  // 첫 접속인지 확인
  if (!players.includes(player.id)) {
    // 첫 접속인 경우
    players.push(player.id);
    world.setDynamicProperty("players", JSON.stringify(players));
    
    // 전체 메시지
    world.sendMessage(`§e${player.name}님이 처음으로 서버에 오셨습니다! 환영합니다!`);
    
    // 개인 메시지
    player.sendMessage("§a안녕하세요! 저희 서버에 처음 오셨네요. 즐거운 시간 되세요!");
    player.sendMessage("§7서버 규칙은 /규칙 명령어로 확인하실 수 있습니다.");
  } else {
    // 재접속인 경우
    world.sendMessage(`§e${player.name}님이 서버에 다시 접속하셨습니다!`);
    player.sendMessage("§a다시 오셨군요! 반갑습니다.");
    player.sendMessage("§7마지막 접속 이후 서버에 몇 가지 변화가 있었습니다.");
  }
});
```

## 태그
#마인크래프트 #베드락 #스크립트API #서버관리 #환영메시지 #플레이어추적 #동적속성 #이벤트시스템 #스티브코딩