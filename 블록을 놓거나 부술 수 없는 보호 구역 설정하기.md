---
title: "블록을 놓거나 부술 수 없는 보호 구역 설정하기"
date: "2025-02-11"
thumbnail: "https://i.ytimg.com/vi/fqjSODEEPXc/hqdefault.jpg"
tags: ["중급", "베드락", "스크립트API", "소스코드", "설계자", "롱폼"]
url: "https://www.youtube.com/watch?v=fqjSODEEPXc"
duration: "3:08"
series: "스크립트API 튜토리얼"
difficulty: "중급"
---

# 블록을 놓거나 부술 수 없는 보호 구역 설정하기

<div align="center">
<img src="https://i.ytimg.com/vi/fqjSODEEPXc/hqdefault.jpg" alt="썸네일" width="600"/>
</div>

## 목차
- [소개](#소개)
- [주요 내용](#주요-내용)
- [구현 과정](#구현-과정)
- [자주 묻는 질문](#자주-묻는-질문)
- [추가 리소스](#추가-리소스)

## 소개
이 영상은 마인크래프트 베드락 에디션에서 스크립트 API를 활용하여 특정 구역을 보호하는 기능을 구현하는 방법을 설명합니다. admin 태그를 가진 관리자만 설정할 수 있는 보호 구역을 만들어, 일반 플레이어들이 해당 구역의 블록을 파괴하거나 설치하지 못하도록 제한하는 시스템을 개발합니다.

## 주요 내용

### 1. 보호 구역 설정 방법
- admin 태그를 가진 플레이어만 보호 구역을 설정할 수 있음
- 나무 도끼 아이템을 사용하여 구역의 시작점과 끝점을 지정
- 블록과 상호작용(우클릭)하여 첫 번째 좌표와 두 번째 좌표를 선택
- 선택된 두 좌표 사이의 모든 공간이 보호 구역으로 설정됨

### 2. 보호 구역 관리 기능
- 여러 개의 보호 구역을 생성하고 관리 가능
- 채팅 명령어를 통해 보호 구역 목록 확인
- 특정 번호의 보호 구역만 삭제하거나 모든 보호 구역 초기화 가능
- 동적 속성(dynamic property)을 사용하여 보호 구역 데이터 저장

### 3. 보호 기능 구현
- admin 태그가 없는 플레이어는 보호 구역 내 블록을 파괴할 수 없음
- admin 태그가 없는 플레이어는 보호 구역 내 블록을 설치할 수 없음
- admin 태그를 가진 플레이어는 모든 구역에서 자유롭게 블록 조작 가능

## 구현 과정

### 1. 필요한 이벤트 리스너 설정 (00:00-01:30)
- 블록 상호작용 이벤트 감지 설정
- 블록 파괴 이벤트 감지 설정
- 블록 설치 이벤트 감지 설정
- 채팅 명령어 처리 이벤트 설정

### 2. 보호 구역 좌표 저장 (01:30-02:30)
- 나무 도끼로 첫 번째 블록 클릭 시 첫 번째 좌표 저장
- 두 번째 블록 클릭 시 두 번째 좌표 저장
- 두 좌표를 기반으로 보호 구역 영역 계산
- 동적 속성에 보호 구역 정보 저장

### 3. 블록 파괴/설치 방지 구현 (02:30-03:08)
- 블록 파괴 이벤트 발생 시 보호 구역 내인지 확인
- 보호 구역 내 블록 파괴 시도 시 admin 태그 확인
- admin 태그가 없으면 이벤트 취소하여 파괴 방지
- 블록 설치 이벤트도 동일한 방식으로 처리

## 자주 묻는 질문

**Q: 보호 구역 설정에 꼭 나무 도끼를 사용해야 하나요?**  
A: 코드에서 지정한 아이템은 나무 도끼이지만, 소스 코드를 수정하여 다른 아이템으로 변경할 수 있습니다. 코드 내 'wooden_axe' 부분을 원하는 아이템 ID로 변경하면 됩니다.

**Q: admin 태그는 어떻게 부여하나요?**  
A: 마인크래프트 명령어 `/tag [플레이어명] add admin`을 사용하여 플레이어에게 admin 태그를 부여할 수 있습니다. 태그를 제거하려면 `/tag [플레이어명] remove admin`을 사용하세요.

**Q: 보호 구역 데이터는 어디에 저장되나요?**  
A: 보호 구역 데이터는 월드의 동적 속성(dynamic property)에 JSON 형식으로 저장됩니다. 이 데이터는 월드가 저장될 때 함께 유지되므로 서버를 재시작해도 보호 구역 정보가 유지됩니다.

**Q: 여러 개의 보호 구역이 겹치면 어떻게 되나요?**  
A: 여러 보호 구역이 겹치더라도 각각의 보호 구역은 독립적으로 작동합니다. 플레이어가 어느 한 보호 구역 내에 있다면 블록 파괴/설치가 제한됩니다.

## 추가 리소스
- [GitHub에서 소스 코드 보기](https://github.com/ssakspirit/scriptAPI/blob/main/BlockProtector.js)
- [스크립트 API 시작하기 튜토리얼](https://youtu.be/zBVdaQ0AXOY)
- [복붙한 코드를 애드온으로 바꾸기](https://youtu.be/lZuJxdKgUMg?si=GCOiludeu4HzUGbl)
- [브릿지 가이드](https://youtu.be/L2s8-w8HXIk?si=aWJONVaLN0kngFtg)
- [베드락 공식 문서](https://learn.microsoft.com/ko-kr/minecraft/creator/scriptapi/minecraft/server/minecraft-server)
- [스티브 코딩 페이스북 페이지](https://www.facebook.com/stvcoding/)

## 이런 분들에게 추천합니다
- 마인크래프트 베드락 서버를 운영하는 관리자
- 스크립트 API를 활용한 애드온 제작에 관심 있는 개발자
- 특정 구역을 보호하여 공공 건축물이나 중요 시설을 보존하고 싶은 플레이어
- 롤플레이나 어드벤처 맵 제작자
- 스크립트 API의 이벤트 처리 방식을 배우고 싶은 분

## 관련 튜토리얼
- [스크립트 API 첫걸음, 채팅명령어 만들기](https://youtu.be/zBVdaQ0AXOY)
- [스크립트 API로 본격적으로 애드온 제작하기](https://youtu.be/lZuJxdKgUMg)
- [블록을 부수는 이벤트 확인하기](https://www.youtube.com/watch?v=블록을부수는이벤트확인하기)
- [애드온으로 구현한 허용 거부 구역](https://www.youtube.com/watch?v=애드온으로구현한허용거부구역)

## 주요 코드
```javascript
// 보호 구역 설정에 사용할 아이템 및 태그 설정
const WAND_ITEM = "minecraft:wooden_axe";
const ADMIN_TAG = "admin";

// 블록과 상호작용할 때 실행되는 이벤트 리스너
system.afterEvents.scriptEventReceive.subscribe((eventData) => {
    if(eventData.id === "minecraft:block_interaction") {
        // admin 태그 확인
        if(!eventData.sourceEntity.hasTag(ADMIN_TAG)) return;
        
        // 나무 도끼 아이템 확인
        const item = eventData.sourceEntity.getComponent("inventory").container.getItem(eventData.sourceEntity.selectedSlot);
        if(!item || item.typeId !== WAND_ITEM) return;
        
        // 첫 번째 좌표 저장
        if(!playerData[eventData.sourceEntity.id].location1) {
            playerData[eventData.sourceEntity.id].location1 = eventData.block.location;
            eventData.sourceEntity.sendMessage("첫 번째 좌표가 저장되었습니다.");
        } 
        // 두 번째 좌표 저장 및 보호 구역 생성
        else {
            playerData[eventData.sourceEntity.id].location2 = eventData.block.location;
            saveProtectedArea(eventData.sourceEntity, playerData[eventData.sourceEntity.id].location1, eventData.block.location);
            playerData[eventData.sourceEntity.id].location1 = null;
        }
    }
});

// 블록 파괴 방지 이벤트 리스너
system.beforeEvents.playerBreakBlock.subscribe((eventData) => {
    if(eventData.player.hasTag(ADMIN_TAG)) return;
    
    // 보호 구역 내 블록인지 확인
    if(isInProtectedArea(eventData.block.location)) {
        eventData.cancel = true;
        eventData.player.sendMessage("이 구역의 블록은 파괴할 수 없습니다.");
    }
});

// 블록 설치 방지 이벤트 리스너
system.beforeEvents.playerPlaceBlock.subscribe((eventData) => {
    if(eventData.player.hasTag(ADMIN_TAG)) return;
    
    // 보호 구역 내인지 확인
    if(isInProtectedArea(eventData.block.location)) {
        eventData.cancel = true;
        eventData.player.sendMessage("이 구역에는 블록을 설치할 수 없습니다.");
    }
});
```

## 태그
#마인크래프트 #베드락 #스크립트API #보호구역 #애드온제작 #서버관리 #영역보호 #스티브코딩