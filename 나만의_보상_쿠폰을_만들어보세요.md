---
title: "나만의 보상 쿠폰을 만들어보세요!"
date: "2025-04-29"
thumbnail: "https://i.ytimg.com/vi/YFiOJ4bQ06w/hqdefault.jpg"
tags: ["중급", "베드락", "스크립트API", "소스코드", "설계자", "롱폼"]
url: "https://youtu.be/YFiOJ4bQ06w?si=yJgnWxDNgW5MfxzM"
duration: "2:36"
series: "스크립트 API 튜토리얼"
difficulty: "중급"
---

# 나만의 보상 쿠폰을 만들어보세요!

<div align="center">
<img src="https://i.ytimg.com/vi/YFiOJ4bQ06w/hqdefault.jpg" alt="썸네일" width="600"/>
</div>

## 목차
- [소개](#소개)
- [주요 내용](#주요-내용)
- [실습 과정](#실습-과정)
- [자주 묻는 질문](#자주-묻는-질문)
- [추가 리소스](#추가-리소스)

## 소개
이 영상은 마인크래프트 베드락 에디션에서 스크립트 API를 활용하여 보상 쿠폰 시스템을 구현하는 방법을 설명합니다. 플레이어가 코드를 입력하여 보상을 받을 수 있는 쿠폰 시스템을 만들고, 관리자가 쿠폰을 생성, 관리, 삭제할 수 있는 인터페이스를 구축하는 과정을 보여줍니다. 동적 속성(Dynamic Property)을 활용하여 월드가 재시작되어도 데이터가 유지되는 고급 기능을 구현합니다.

## 주요 내용

### 1. 쿠폰 시스템 구축
- 쿠폰 코드 입력 및 확인 기능 구현
- 중복 사용 방지 시스템
- 나침반 아이템을 통한 쿠폰 코드 입력 UI

### 2. 관리자용 쿠폰 관리 기능
- 쿠폰 생성, 삭제, 초기화 기능
- 관리자 권한 설정 (태그 시스템 활용)
- 쿠폰 사용 현황 확인 기능

### 3. 다양한 보상 설정 방법
- 아이템 지급 명령어 설정
- 메시지 출력 명령어 설정
- 여러 종류의 보상 쿠폰 관리

## 실습 과정

1. **쿠폰 시스템 시연 (00:00-00:45)**
   - 다이아몬드 쿠폰 코드(스티브코딩) 입력
   - 나침반으로 UI 열기
   - 쿠폰 사용 후 중복 사용 확인(불가능)

2. **쿠폰 관리 시스템 접근 (00:46-01:10)**
   - 채팅 명령어 "!쿠폰관리" 입력
   - 관리자 UI 인터페이스 열기
   - 쿠폰 생성 메뉴 선택

3. **새 쿠폰 생성하기 (01:11-01:45)**
   - 코드 입력 (1234)
   - 설명 추가 (랜덤 선물)
   - 보상 명령어 설정 (give @s apple)
   - 또 다른 쿠폰 생성 (4321, 꽝)
   - 중복 코드 방지 기능 확인

4. **쿠폰 관리 및 사용 현황 (01:46-02:20)**
   - 쿠폰 삭제 기능
   - 사용 현황 확인 (사용완료/미사용)
   - 모든 쿠폰 초기화 기능 
   - 관리자 권한 설정 (admin 태그)

5. **쿠폰 사용 및 정리 (02:21-끝)**
   - 새로 만든 쿠폰 사용해보기
   - 보상 수령 확인
   - 동적 속성으로 데이터 영구 저장 설명

## 자주 묻는 질문

**Q: 쿠폰 관리 기능을 누가 사용할 수 있나요?**
A: 쿠폰 관리 기능은 운영자 권한(OP)이 있고, 추가로 "admin" 태그가 부여된 플레이어만 사용할 수 있습니다. 이는 쿠폰 시스템의 보안을 위해 설정된 이중 보안 장치입니다.

**Q: 쿠폰으로 어떤 종류의 보상을 줄 수 있나요?**
A: 마인크래프트에서 명령어로 실행 가능한 모든 것을 보상으로 설정할 수 있습니다. 아이템 지급(give), 효과 부여(effect), 메시지 출력(say, title), 텔레포트(tp) 등 다양한 명령어를 활용할 수 있습니다.

**Q: 월드를 재시작해도 쿠폰 데이터가 유지되나요?**
A: 네, 이 시스템은 동적 속성(Dynamic Property)을 활용하여 데이터를 저장하기 때문에 월드를 종료하고 다시 시작해도 쿠폰 데이터가 유지됩니다.

**Q: 플레이어마다 다른 쿠폰을 사용하게 할 수 있나요?**
A: 네, 시스템은 어떤 플레이어가 어떤 쿠폰을 사용했는지 추적합니다. 따라서 한 플레이어가 쿠폰을 사용했더라도 다른 플레이어는 같은 쿠폰을 사용할 수 있게 구성할 수 있습니다.

**Q: 쿠폰 코드는 어떤 형식으로 만들 수 있나요?**
A: 숫자, 문자 등 다양한 형식으로 코드를 만들 수 있습니다. 코드의 길이나 형식에 특별한 제한은 없지만, 너무 복잡한 코드는 사용자가 입력하기 어려울 수 있으므로 적절한 길이와 형식을 선택하는 것이 좋습니다.

## 추가 리소스
- [스크립트 API 시작하기 영상](https://youtu.be/zBVdaQ0AXOY)
- [소스코드 GitHub 링크](https://github.com/ssakspirit/scriptAPI/blob/main/advancedCouponManagementSystem.js)
- [애드온 다운로드 링크](https://o365cbe-my.sharepoint.com/:u:/g/personal/ssakspirit_o365cbe_net/EZkOqvCm8w9PtDIW3DIXuskBdDIoGG_5nMuL-MCV5LWswg?e=BNNslH)
- [브릿지 프로젝트파일 다운로드](https://o365cbe-my.sharepoint.com/:u:/g/personal/ssakspirit_o365cbe_net/EVVh2I0e0NRHlZ9AeJsYHJoBIpsLzW3H4WBN5uWM6316fA?e=g4oTQ6)
- [브릿지 가이드 영상](https://youtu.be/L2s8-w8HXIk?si=aWJONVaLN0kngFtg)
- [베드락 공식 문서](https://learn.microsoft.com/ko-kr/minecraft/creator/scriptapi/minecraft/server/minecraft-server)
- [스티브코딩 페이스북 페이지](https://www.facebook.com/stvcoding/)

## 이런 분들에게 추천합니다
- 마인크래프트 서버나 렐름에 이벤트 시스템을 추가하고 싶은 관리자
- 스크립트 API를 활용한 고급 기능을 학습하고 싶은 개발자
- 플레이어에게 보상을 체계적으로 제공하고 싶은 교육자나 서버 운영자
- 동적 속성(Dynamic Property)을 활용한 데이터 저장 방법을 배우고 싶은 분
- UI 시스템을 활용한 인터페이스 구축 방법을 배우고 싶은 분

## 관련 튜토리얼
- [스크립트 API의 첫걸음, 채팅명령어 만들기]
- [스크립트 API로 본격적으로 애드온 제작하기]
- [특정 몹을 잡으면 특별한 보상을 받습니다]
- [블록과 상호작용하면 UI창이 뜬다!]
- [상점에 팔고 싶은 아이템을 직접 입력하세요!]

## 실습 코드
```javascript
import { world, system, ItemStack, DynamicPropertiesDefinition } from '@minecraft/server';
import { ActionFormData, ModalFormData } from '@minecraft/server-ui';

// 월드 로드 시 동적 속성 정의
world.afterEvents.worldInitialize.subscribe((event) => {
    const definition = new DynamicPropertiesDefinition();
    definition.defineString('coupons', 2048); // 쿠폰 데이터 저장 (JSON 문자열)
    event.propertyRegistry.registerWorldDynamicProperties(definition);
    
    // 초기화 (필요시)
    if (!world.getDynamicProperty('coupons')) {
        world.setDynamicProperty('coupons', JSON.stringify({
            codes: {},
            used: {}
        }));
    }
});

// 쿠폰 데이터 가져오기
function getCouponData() {
    const couponsData = world.getDynamicProperty('coupons');
    return couponsData ? JSON.parse(couponsData) : { codes: {}, used: {} };
}

// 쿠폰 데이터 저장하기
function saveCouponData(data) {
    world.setDynamicProperty('coupons', JSON.stringify(data));
}

// 채팅 명령어 처리 - 쿠폰 관리
world.beforeEvents.chatSend.subscribe((event) => {
    const player = event.sender;
    const message = event.message;
    
    if (message === '!쿠폰관리') {
        event.cancel = true;
        
        // 관리자 권한 확인
        if (!player.isOp() || !player.hasTag('admin')) {
            player.sendMessage('§c관리자 권한이 필요합니다.');
            return;
        }
        
        showCouponManagementMenu(player);
    }
});

// 나침반 사용 이벤트 - 쿠폰 사용
world.afterEvents.itemUse.subscribe((event) => {
    const player = event.source;
    const item = event.itemStack;
    
    if (item && item.typeId === 'minecraft:compass') {
        showCouponRedeemUI(player);
    }
});

// 쿠폰 관리 메뉴 UI
function showCouponManagementMenu(player) {
    const form = new ActionFormData()
        .title('쿠폰 관리 시스템')
        .body('원하는 작업을 선택하세요.')
        .button('쿠폰 생성')
        .button('쿠폰 관리')
        .button('사용 현황')
        .button('모든 쿠폰 초기화');
        
    form.show(player).then(response => {
        if (response.canceled) return;
        
        switch (response.selection) {
            case 0:
                showCreateCouponUI(player);
                break;
            case 1:
                showManageCouponsUI(player);
                break;
            case 2:
                showCouponUsageUI(player);
                break;
            case 3:
                resetAllCoupons(player);
                break;
        }
    });
}

// 쿠폰 생성 UI
function showCreateCouponUI(player) {
    const form = new ModalFormData()
        .title('쿠폰 생성')
        .textField('쿠폰 코드:', '코드 입력...')
        .textField('쿠폰 설명:', '설명 입력...')
        .textField('보상 명령어:', 'give @s apple', '명령어를 입력하세요. @s는 플레이어를 의미합니다.');
        
    form.show(player).then(response => {
        if (response.canceled || !response.formValues[0]) return;
        
        const code = response.formValues[0];
        const description = response.formValues[1] || '';
        const command = response.formValues[2] || '';
        
        // 쿠폰 데이터
        const couponData = getCouponData();
        
        // 중복 코드 확인
        if (couponData.codes[code]) {
            player.sendMessage('§c이미 존재하는 쿠폰 코드입니다.');
            return;
        }
        
        // 쿠폰 추가
        couponData.codes[code] = {
            description: description,
            command: command,
            created: new Date().toISOString()
        };
        
        saveCouponData(couponData);
        player.sendMessage(`§a쿠폰 코드 '${code}'가 생성되었습니다.`);
    });
}

// 쿠폰 관리 UI (삭제 기능)
function showManageCouponsUI(player) {
    const couponData = getCouponData();
    const codes = Object.keys(couponData.codes);
    
    if (codes.length === 0) {
        player.sendMessage('§c등록된 쿠폰이 없습니다.');
        return;
    }
    
    const form = new ActionFormData()
        .title('쿠폰 관리')
        .body('삭제할 쿠폰을 선택하세요.');
        
    codes.forEach(code => {
        const description = couponData.codes[code].description;
        form.button(`${code}\n${description}`);
    });
    
    form.button('§l뒤로 가기');
    
    form.show(player).then(response => {
        if (response.canceled) return;
        
        if (response.selection === codes.length) {
            showCouponManagementMenu(player);
            return;
        }
        
        const selectedCode = codes[response.selection];
        deleteCoupon(player, selectedCode);
    });
}

// 쿠폰 삭제 함수
function deleteCoupon(player, code) {
    const couponData = getCouponData();
    
    if (couponData.codes[code]) {
        delete couponData.codes[code];
        saveCouponData(couponData);
        player.sendMessage(`§a쿠폰 코드 '${code}'가 삭제되었습니다.`);
    }
    
    showManageCouponsUI(player);
}

// 쿠폰 사용 현황 UI
function showCouponUsageUI(player) {
    const form = new ActionFormData()
        .title('쿠폰 사용 현황')
        .body('확인할 항목을 선택하세요.')
        .button('모든 쿠폰')
        .button('사용 완료된 쿠폰')
        .button('미사용 쿠폰')
        .button('뒤로 가기');
        
    form.show(player).then(response => {
        if (response.canceled) return;
        
        switch (response.selection) {
            case 0:
                showCouponList(player, 'all');
                break;
            case 1:
                showCouponList(player, 'used');
                break;
            case 2:
                showCouponList(player, 'unused');
                break;
            case 3:
                showCouponManagementMenu(player);
                break;
        }
    });
}

// 쿠폰 목록 표시
function showCouponList(player, filter) {
    const couponData = getCouponData();
    const allCodes = Object.keys(couponData.codes);
    const usedCodes = Object.keys(couponData.used);
    
    let codes;
    let title;
    
    switch (filter) {
        case 'all':
            codes = allCodes;
            title = '모든 쿠폰';
            break;
        case 'used':
            codes = usedCodes;
            title = '사용 완료된 쿠폰';
            break;
        case 'unused':
            codes = allCodes.filter(code => !usedCodes.includes(code));
            title = '미사용 쿠폰';
            break;
    }
    
    if (codes.length === 0) {
        player.sendMessage(`§c${title}이 없습니다.`);
        showCouponUsageUI(player);
        return;
    }
    
    let message = `§6===== ${title} =====\n`;
    codes.forEach(code => {
        const description = couponData.codes[code] ? couponData.codes[code].description : '삭제됨';
        message += `§f${code}§r - ${description}\n`;
    });
    
    player.sendMessage(message);
    showCouponUsageUI(player);
}

// 모든 쿠폰 초기화
function resetAllCoupons(player) {
    const form = new ActionFormData()
        .title('쿠폰 초기화')
        .body('§c경고: 모든 쿠폰 정보가 삭제됩니다. 계속하시겠습니까?')
        .button('§c초기화')
        .button('취소');
        
    form.show(player).then(response => {
        if (response.canceled || response.selection === 1) {
            showCouponManagementMenu(player);
            return;
        }
        
        world.setDynamicProperty('coupons', JSON.stringify({
            codes: {},
            used: {}
        }));
        
        player.sendMessage('§a모든 쿠폰이 초기화되었습니다.');
        showCouponManagementMenu(player);
    });
}

// 쿠폰 사용 UI (일반 사용자용)
function showCouponRedeemUI(player) {
    const form = new ModalFormData()
        .title('쿠폰 사용')
        .textField('쿠폰 코드를 입력하세요:', '코드 입력...');
        
    form.show(player).then(response => {
        if (response.canceled || !response.formValues[0]) return;
        
        const code = response.formValues[0];
        redeemCoupon(player, code);
    });
}

// 쿠폰 사용 처리
function redeemCoupon(player, code) {
    const couponData = getCouponData();
    const playerId = player.id;
    
    // 쿠폰 존재 확인
    if (!couponData.codes[code]) {
        player.sendMessage('§c존재하지 않는 쿠폰 코드입니다.');
        return;
    }
    
    // 이미 사용한 쿠폰 확인
    if (couponData.used[code] && couponData.used[code].includes(playerId)) {
        player.sendMessage('§c이미 사용한 쿠폰입니다.');
        return;
    }
    
    // 쿠폰 명령어 실행
    const command = couponData.codes[code].command;
    
    try {
        player.runCommand(command);
        
        // 사용 기록 저장
        if (!couponData.used[code]) {
            couponData.used[code] = [];
        }
        couponData.used[code].push(playerId);
        
        saveCouponData(couponData);
        player.sendMessage(`§a쿠폰을 성공적으로 사용했습니다!`);
    } catch (error) {
        player.sendMessage(`§c명령어 실행 중 오류가 발생했습니다: ${error.message}`);
    }
}
```

## 태그
`#마인크래프트` `#스크립트API` `#쿠폰시스템` `#보상시스템` `#베드락` `#스티브코딩` `#UI시스템` `#동적속성`