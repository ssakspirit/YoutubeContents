---
title: "가지고 있는 인챈트 그대로 장비 업그레이드!"
date: "2025-04-25"
thumbnail: "https://i.ytimg.com/vi/CprkvlH63_s/hqdefault.jpg"
tags: ["고급", "베드락", "스크립트API", "소스코드", "설계자", "롱폼"]
url: "https://youtu.be/CprkvlH63_s"
duration: "3:17"
series: "스크립트 API 튜토리얼"
episode: null
difficulty: "고급"
---

# 가지고 있는 인챈트 그대로 장비 업그레이드!

<div align="center">
<img src="https://i.ytimg.com/vi/CprkvlH63_s/hqdefault.jpg" alt="썸네일" width="600"/>
</div>

## 목차
- [소개](#소개)
- [주요 내용](#주요-내용)
- [실습 과정](#실습-과정)
- [자주 묻는 질문](#자주-묻는-질문)
- [추가 리소스](#추가-리소스)

## 소개
이 영상은 마인크래프트 베드락 에디션의 스크립트 API를 활용하여 인챈트가 적용된 장비를 그대로 유지하면서 상위 등급으로 업그레이드하거나 하위 등급으로 다운그레이드할 수 있는 시스템을 구현하는 방법을 보여줍니다. UI 인터페이스를 통해 아이템을 교환하고, 에메랄드를 소모하여 등급을 변경하는 과정과 함께 코드 구현 방법을 상세히 설명합니다. 이 시스템은 이전에 소개된 아이템 강화 시스템과 연동하여 사용할 수 있어 더욱 심화된 게임 플레이를 제공합니다.

## 주요 내용

### 1. 장비 등급 업그레이드 시스템
- 인챈트가 적용된 장비를 그대로 유지하며 상위 등급으로 업그레이드
- 다양한 장비(검, 곡괭이, 도끼)의 등급 변경 지원
- 에메랄드를 소모하는 비용 시스템 구현
- 확률 기반 업그레이드 성공/실패 메커니즘

### 2. UI 인터페이스 구현
- 사용자 친화적인 아이템 교환 인터페이스
- 현재 아이템에 대한 업그레이드/다운그레이드 옵션 표시
- 확률 및 비용 정보 제공
- 채팅 명령어로 인터페이스 호출

### 3. 코드 분석 및 구현 방법
- 스크립트 API를 활용한 아이템 속성 조작
- 아이템 컴포넌트에서 인챈트 정보 추출 및 적용
- 여러 스크립트를 하나의 애드온에서 결합하는 방법
- 아이템 단계별 업그레이드 로직 구현

## 실습 과정

1. **시스템 작동 시연 (00:00-01:07)**
   - 인챈트된 다이아몬드 곡괭이 업그레이드/다운그레이드 시연
   - 첫 번째 슬롯에 아이템 배치 및 '강화 상점' 명령어 실행
   - 인챈트 유지하며 철 곡괭이로 다운그레이드
   - 다이아몬드 및 네더라이트 업그레이드 시도와 확률 시스템 확인

2. **코드 구성 및 설정 (01:07-02:30)**
   - 교환 가능한 아이템 그룹 설정 방법
   - 에메랄드 비용 및 확률 설정 부분 확인
   - 아이템 등급 계층 구조 정의
   - UI 호출 함수 및 아이템 검증 로직 설명

3. **인챈트 유지 및 아이템 교체 로직 (02:30-03:17)**
   - 인챈트 정보 추출 및 새 아이템에 적용하는 방법
   - 인벤토리에서 아이템 제거 및 새 아이템 지급 로직
   - 이전 강화 시스템과의 연동 방법
   - 여러 스크립트 파일을 하나의 애드온에서 임포트하는 방법

## 자주 묻는 질문

**Q: 이 시스템은 어떤 종류의 아이템에 적용할 수 있나요?**
A: 현재 코드에서는 검, 곡괭이, 도끼 세 가지 종류의 아이템에 대해 설정되어 있지만, 코드를 수정하여 다른 장비(갑옷, 삽, 괭이 등)에도 적용할 수 있습니다. 코드 내의 `exchangeableItemGroups` 부분에 원하는 아이템을 추가하면 됩니다.

**Q: 업그레이드/다운그레이드 확률과 비용을 조정할 수 있나요?**
A: 네, 코드 내에서 쉽게 조정할 수 있습니다. `upgradeChances`와 `downgradeCosts` 변수에서 각 아이템 등급별 확률과 비용을 설정할 수 있습니다. 예를 들어, 네더라이트로의 업그레이드 확률을 50%에서 30%로 낮추거나, 비용을 5 에메랄드에서 10 에메랄드로 높일 수 있습니다.

**Q: 이전 강화 시스템과 어떻게 연결할 수 있나요?**
A: 코드에서 보여주는 것처럼 `main.js` 파일에서 이전 강화 시스템 스크립트를 임포트하면 됩니다. 파일 경로를 정확히 지정하고 `import './폴더명/스크립트파일명.js';` 형식으로 추가하면 두 시스템이 함께 작동합니다.

**Q: 아이템 인챈트 정보는 어떻게 유지되나요?**
A: 코드에서는 현재 아이템의 `enchantments` 컴포넌트를 추출한 후, 새 아이템을 생성할 때 이 인챈트 정보를 그대로 적용합니다. 이 과정은 `item.getComponent('enchantments')`를 통해 인챈트 정보를 가져오고, 새 아이템에 동일한 정보를 설정하는 방식으로 이루어집니다.

## 추가 리소스
- [스크립트 API 시작하기](https://youtu.be/zBVdaQ0AXOY)
- [코드 깃허브 저장소](https://github.com/ssakspirit/scriptAPI/blob/main/itemExchangeandEnhancementSystem.js)
- [마우스 클릭 두 번으로 아이템 강화!](https://youtu.be/3R-tee559Ho?si=wOODtwEwRgwirfBY)
- [브릿지 가이드](https://youtu.be/L2s8-w8HXIk?si=aWJONVaLN0kngFtg)
- [베드락 공식 문서](https://learn.microsoft.com/ko-kr/minecraft/creator/scriptapi/minecraft/server/minecraft-server)
- [스티브 코딩 페이스북 페이지](https://www.facebook.com/stvcoding/)

## 이런 분들에게 추천합니다
- 마인크래프트 베드락 에디션에서 스크립트 API를 배우고 싶은 개발자
- 서버나 월드에 고급 기능을 추가하고 싶은 마인크래프트 컨텐츠 제작자
- RPG 요소가 있는 마인크래프트 맵이나 게임을 만들고 싶은 크리에이터
- 기존의 마인크래프트 게임플레이에 심화된 시스템을 추가하고 싶은 플레이어
- 마인크래프트 애드온 개발에 관심 있는 중급/고급 사용자
- 프로그래밍을 배우면서 실제 게임에 적용해보고 싶은 학생들

## 관련 튜토리얼
- [스크립트 API 첫걸음, 채팅명령어 만들기]
- [UI 개발하기 - 아이템 상점 시스템]
- [플레이어 인벤토리 다루기]
- [아이템 속성 조작하기]
- [아이템 강화 시스템 만들기]

## 코드 예시
```javascript
// 아이템 교환 및 업그레이드 시스템 핵심 코드
import { world, system, ItemStack } from "@minecraft/server";

// 교환 가능한 아이템 그룹 정의
const exchangeableItemGroups = {
    "sword": ["wooden_sword", "stone_sword", "iron_sword", "diamond_sword", "netherite_sword"],
    "pickaxe": ["wooden_pickaxe", "stone_pickaxe", "iron_pickaxe", "diamond_pickaxe", "netherite_pickaxe"],
    "axe": ["wooden_axe", "stone_axe", "iron_axe", "diamond_axe", "netherite_axe"]
};

// 업그레이드 확률 정의
const upgradeChances = {
    "wooden": 90,
    "stone": 80,
    "iron": 70,
    "diamond": 50
};

// 비용 정의
const upgradeCosts = {
    "wooden": 1,
    "stone": 2,
    "iron": 3,
    "diamond": 5
};

// 아이템 교환 함수
function exchangeItem(player, currentItem, newItemId, isUpgrade = true) {
    // 인챈트 정보 가져오기
    const enchantments = currentItem.getComponent("enchantments");
    const enchantmentList = enchantments.enchantments;
    
    // 확률 계산
    let chance = 100;
    if (isUpgrade) {
        const materialType = getMaterialType(currentItem.typeId);
        chance = upgradeChances[materialType] || 100;
    }
    
    // 확률 체크
    const roll = Math.random() * 100;
    if (roll <= chance) {
        // 새 아이템 생성
        const newItem = new ItemStack(newItemId);
        
        // 인챈트 복사
        const newEnchantments = newItem.getComponent("enchantments");
        for (const ench of enchantmentList) {
            newEnchantments.enchantments.addEnchantment(ench);
        }
        
        // 인벤토리에서 아이템 제거 및 에메랄드 소모
        const inventory = player.getComponent("inventory");
        inventory.container.setItem(player.selectedSlot, null);
        
        // 새 아이템 지급
        player.getComponent("inventory").container.addItem(newItem);
        player.tell("§a아이템 교환 성공!");
        return true;
    } else {
        player.tell("§c아이템 교환 실패!");
        return false;
    }
}

// UI 호출 명령어 등록
world.beforeEvents.chatSend.subscribe((event) => {
    if (event.message.startsWith("강화 상점")) {
        event.cancel = true;
        showEnhancementShop(event.sender);
    }
});
```

## 태그
`#마인크래프트` `#베드락에디션` `#스크립트API` `#아이템강화` `#인챈트유지` `#업그레이드시스템` `#코딩튜토리얼` `#UI개발` `#게임개발` `#스티브코딩`